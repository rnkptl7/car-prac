import{_ as u,E as _,m as h,u as f,g,y as w,r as i,o as v,a as b,b as t,w as E,d as s}from"./index-3a76fd50.js";const S={components:{ErrorMessage:_},data(){return{schema:{email:"required|email",password:"required|passwordmin:8|passwordmax:12|regex:^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).*$"},form:{email:"",password:""}}},computed:{...h(f,["loading"])},methods:{...g(w,["loginUser","getUsers"]),async submitForm(){try{if(this.loading=!0,(await this.getUsers()).data.data.find(o=>o.email===this.form.email&&o.password===this.form.password)){this.$toast.success("Login successfully",{position:"top-right",duration:3e3});let o=Math.random().toString(36).substr(2);sessionStorage.setItem("isLoggedIn",!0),sessionStorage.setItem("token",o),this.loading=!1,this.$router.replace({name:"Home"})}else throw this.loading=!1,new Error("Incorrect email or password")}catch{this.loading=!1,alert("Incorrect email or password!")}}}},V={class:"container"},y=s("div",{class:"heading"},[s("h1",{class:"heading"},"Login")],-1),x={class:"fields"},U={class:"inputDiv"},k=s("label",null,"Email:",-1),I={class:"inputDiv"},L=s("label",null,"Password:",-1),A=s("div",{class:"buttons block"},[s("button",{type:"submit",class:"btn"},"Login")],-1);function M(n,e,d,o,a,c){const l=i("vee-field"),m=i("ErrorMessage"),p=i("vee-form");return v(),b("div",V,[t(p,{class:"form","validation-schema":a.schema,onSubmit:c.submitForm},{default:E(()=>[y,s("div",x,[s("div",U,[k,t(l,{type:"email",modelValue:a.form.email,"onUpdate:modelValue":e[0]||(e[0]=r=>a.form.email=r),placeholder:"Enter Your Email",name:"email"},null,8,["modelValue"]),t(m,{name:"email",class:"error"})]),s("div",I,[L,t(l,{type:"password",modelValue:a.form.password,"onUpdate:modelValue":e[1]||(e[1]=r=>a.form.password=r),placeholder:"Enter Your Password",name:"password"},null,8,["modelValue"]),t(m,{name:"password",class:"error"})])]),A]),_:1},8,["validation-schema","onSubmit"])])}const C=u(S,[["render",M]]);export{C as default};
